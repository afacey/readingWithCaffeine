(this["webpackJsonpreading-with-caffeine"]=this["webpackJsonpreading-with-caffeine"]||[]).push([[0],{32:function(e,t,a){e.exports=a(63)},37:function(e,t,a){},38:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),i=a.n(o),c=(a(37),a(6)),s=a(7),l=a(10),u=a(8),p=(a(38),function(){return r.a.createElement("header",null,r.a.createElement("div",{className:"wrapper headerFlex"},r.a.createElement("h1",null,"Reading With",r.a.createElement("span",{className:"caffeine animate__animated animate__bounceIn"},"Caffeine"))))}),m=function(){return r.a.createElement("section",{className:"instructionsSection"},r.a.createElement("h2",null,"Instructions"),r.a.createElement("p",null,"Picking up books from your local library? Use this tool to locate a coffee shop nearby where you can relax and read in peace."),r.a.createElement("p",null,"1. Enter your library and set preferred distance."),r.a.createElement("p",null,"2. A map will appear with a list of 10 coffee shops around the library."),r.a.createElement("p",null,"3. Select your preferred coffee shop from the list and choose a mode of transportation to get directions."))},d=a(12),f=a(3),h=a(9),g=a(4),y=a.n(g),S=a(15),E=a.n(S),v=function(e,t){var a=e.latitude,n=e.longitude,r=e.radius,o=t.reduce((function(e,t,a){var n=Object(d.a)(t.place.geometry.coordinates,2),r=n[0],o=n[1];return e+="".concat(o,",").concat(r,"|marker-md-").concat(a+1,"||")}),""),i="".concat(a,",").concat(n,"|marker-md-350482||");return"https://www.mapquestapi.com/staticmap/v5/map?key=".concat("dgYN9vqDVgOBOwNtvPlR14jKSxdi9dVa","&scalebar=true|bottom&locations=").concat(i).concat(o,"&size=500,600&type=light&shape=radius:").concat(r,"km|").concat(a,",").concat(n)},b=a(2),O=function(e){return function(t){(function(e){return E()({url:"https://www.mapquestapi.com/search/v4/place",params:{key:"dgYN9vqDVgOBOwNtvPlR14jKSxdi9dVa",circle:"".concat(e.longitude,",").concat(e.latitude,",").concat(1e3*e.radius),sort:"relevance",q:"Coffee Shop",pageSize:50}})})(e).then((function(a){var n=a.data.results;if(0===n.length)y.a.fire({title:"No results",text:"Try another search please",icon:"warning",confirmButtonText:"Okay."});else{for(var r=Object(h.a)(n),o=r.length-1;o>0;o--){var i=Math.floor(Math.random()*(o+1)),c=r[o];r[o]=r[i],r[i]=c}r.splice(10),t({type:"GET_COFFEE_SHOPS",payload:{list:r,map:v(e,r)}})}})).catch((function(e){y.a.fire({title:"No response",text:"Try searching again later sir.",icon:"warning",confirmButtonText:"Okay"})}))}},N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).handleLibraryInputChange=function(t){e.state.showSuggestions||e.setState({showSuggestions:!0});var a=t.target.value;e.setState({libraryInput:a},e.getPredictiveSearch)},e.handleRadiusSelected=function(t){var a=t.target.value;e.setState({selectedRadius:a})},e.getPredictiveSearch=function(){var t=e.state.libraryInput;t.length>=3&&t.length<25?function(e){if(e.length>=3&&e.length<25){return E()({url:"https://www.mapquestapi.com/search/v3/prediction",params:{q:e,collection:"poi",key:"dgYN9vqDVgOBOwNtvPlR14jKSxdi9dVa"}})}}(t).then((function(t){e.setState({autoComplete:Object(h.a)(t.data.results)})})).catch((function(e){y.a.fire({title:"Oops!",text:"There was an error! ".concat(e,". Try searching at a later time."),icon:"warning",confirmButtonText:"OK"})})):t.length<3&&e.setState({showSuggestions:!1})},e.handleFormSubmit=function(t){t.preventDefault();var a=e.state,n=a.autoComplete,r=a.libraryInput,o=a.selectedLibrary,i=a.selectedRadius;r.length<3&&y.a.fire({title:"No results",text:"Library name must be greater than 3 characters.",icon:"warning",confirmButtonText:"Okay"}),(0===n.length||i<1||i>20)&&y.a.fire({title:"No results",text:"Try another search.",icon:"warning",confirmButtonText:"Okay"});var c=Object(f.a)(Object(f.a)({},o),{},{radius:i});e.props.dispatch({type:"SET_LIBRARY",payload:c}),e.setState({showSuggestions:!1},(function(){e.props.dispatch(O(e.props.library))}))},e.handleLibraryInputSelected=function(t){var a=t.target.value,n=e.state.autoComplete.filter((function(e){return e.name===a})),r=Object(d.a)(n,1)[0],o=r.name,i=Object(d.a)(r.place.geometry.coordinates,2),c=i[0],s={name:o,latitude:i[1],longitude:c};e.setState({libraryInput:o,selectedLibrary:s,showSuggestions:!1})},e.state={libraryInput:"",selectedLibrary:"",selectedRadius:5,autoComplete:[],showSuggestions:!1},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.handleLibraryInputChange,t=this.handleRadiusSelected,a=this.handleFormSubmit,n=this.handleLibraryInputSelected,o=this.state,i=o.libraryInput,c=o.selectedRadius,s=o.showSuggestions,l=o.autoComplete;return r.a.createElement("form",{id:"form",action:"submit"},r.a.createElement("div",{className:"formTopSection"},r.a.createElement("label",{htmlFor:"inputLocation"},"Find Library"),r.a.createElement("div",{className:"inputLocationContainer"},r.a.createElement("input",{type:"text",id:"inputLocation",className:"inputLocation",value:i,onChange:e,placeholder:"",autoComplete:"off"}),s&&r.a.createElement("ul",{className:"inputLocationAutoComplete"},l.map((function(e){return r.a.createElement("li",{key:e.id,className:"autoCompleteResults"},r.a.createElement("button",{type:"button",key:e.id,onClick:n,value:e.name},e.name))}))))),r.a.createElement("div",{className:"formBottomSection"},r.a.createElement("label",{htmlFor:"inputRadius"},"Maximum distance ",r.a.createElement("span",null,"(1 - 20km)")),r.a.createElement("input",{type:"number",id:"inputRadius",className:"inputRadius",min:"0",max:"20",value:c,onChange:t,placeholder:"",autoComplete:"off",required:!0}),r.a.createElement("button",{className:"formSubmitButton",type:"submit",onClick:a},"Go")))}}]),a}(n.Component),C=Object(b.b)((function(e){return{library:e.library,coffeeShops:e.coffeeShops.list}}))(N),w=function(){return r.a.createElement("footer",null,r.a.createElement("div",{className:"wrapper footerFlex"},r.a.createElement("div",{className:"creators"},r.a.createElement("p",null,"Created by Andre Facey + Connie Tsang + Kristen Delorey + Raphael Roques at ",r.a.createElement("a",{href:"https://junocollege.com/"},"Juno College"))),r.a.createElement("div",{className:"photoCredit"},r.a.createElement("p",null,"Image by Thomas Park / Unsplash"))))},T=a(19),k=a.n(T),j=a(30),I=Object(b.b)((function(e){return{coffeeShops:e.coffeeShops.list,library:e.library}}))((function(e){var t=e.coffeeShops,a=e.handleCoffeeShopSelected;return r.a.createElement("div",{className:"coffeeShops"},r.a.createElement("h2",null,"Coffee Shops In The Area"),r.a.createElement("ol",{className:"coffeeShopsContainer"},t.map((function(e,t){return r.a.createElement("li",{key:e.id},r.a.createElement("button",{className:"coffeeShopButton",type:"button",key:e.id,onClick:a,value:e.id},r.a.createElement("div",{className:"coffeeShopNumber"},r.a.createElement("p",null,t+1)),r.a.createElement("div",{className:"coffeeShopText"},r.a.createElement("h3",null,e.name),r.a.createElement("p",null,e.place.properties.street))))}))))})),R=Object(b.b)((function(e){return{directions:e.directions}}))((function(e){var t=e.directions,a=e.handleBackButton;return r.a.createElement("div",{className:"transportationAndDirections"},r.a.createElement("button",{className:"transportationButton",onClick:a},"\u2b05 to Coffee Shops"),r.a.createElement("h2",null,"Directions to ",t.location.name),r.a.createElement("div",{className:"directionMarkers","aria-hidden":"true"},r.a.createElement("div",{className:"directionMarkerContainer"},r.a.createElement("img",{src:"https://assets.mapquestapi.com/icon/v2/marker-start.png",alt:""}),r.a.createElement("p",null,"Start")),r.a.createElement("div",{className:"directionMarkerContainer"},r.a.createElement("img",{src:"https://assets.mapquestapi.com/icon/v2/marker-end.png",alt:""}),r.a.createElement("p",null,"End"))),r.a.createElement("div",{className:"modeOfTransportationInputContainer"},r.a.createElement("label",{htmlFor:"modeOfTransportation"},"Choose a mode of transportation:"),r.a.createElement("select",{id:"modeOfTransportation",value:t.mode,onChange:function(t){return e.dispatch({type:"SET_DIRECTIONS_MODE",payload:t.target.value})}},r.a.createElement("option",{value:"fastest"},"Drive"),r.a.createElement("option",{value:"pedestrian"},"Walk"),r.a.createElement("option",{value:"bicycle"},"Bike"))),r.a.createElement("ol",{className:"directionsToCoffeeShopOl"},t.instructions.map((function(e,t){return r.a.createElement("li",{key:t},e)}))))}));var B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).handleBackButton=function(){return e.setState({displayDirections:!1})},e.handleCoffeeShopSelected=function(t){var a=t.currentTarget.value,n=e.props.coffeeShops.reduce((function(e,t){return t.id===a&&(e={name:t.name,longitude:t.place.geometry.coordinates[0],latitude:t.place.geometry.coordinates[1]}),e}),{});JSON.stringify(n)!==JSON.stringify(e.props.selectedCoffeeShop)?e.props.dispatch({type:"SET_DIRECTIONS_LOCATION",payload:n}):e.setState({displayDirections:!0})},e.getSelectedTransportation=Object(j.a)(k.a.mark((function t(){var a,n,r,o,i,c,s,l;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.selectedLibrary,r=a.selectedCoffeeShop,o=a.modeType,t.prev=1,t.next=4,p=n,m=r,d=o,E()({url:"https://www.mapquestapi.com/directions/v2/route",params:{key:"dgYN9vqDVgOBOwNtvPlR14jKSxdi9dVa",from:"".concat(p.latitude,",").concat(p.longitude),to:"".concat(m.latitude,",").concat(m.longitude),routeType:d,scalebar:"true|bottom",size:"600,600",type:"light"}});case 4:i=t.sent,c=i.data.route.legs[0].maneuvers,s=c.map((function(e){return e.narrative})),l=i.data.route.sessionId,e.props.dispatch({type:"SET_DIRECTIONS_INSTRUCTIONS",payload:{instructions:Object(h.a)(s),session:l,map:(u=l,"https://www.mapquestapi.com/staticmap/v5/map?session=".concat(u,"&key=").concat("dgYN9vqDVgOBOwNtvPlR14jKSxdi9dVa","&scalebar=true|bottom&size=500,600&type=light&traffic=flow|cons|inc"))}}),e.setState({displayDirections:!0}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),y.a.fire({title:"Oops!",text:"There was an error retrieving the directions. Please try again later.",icon:"warning",confirmButtonText:"Okay"});case 15:case"end":return t.stop()}var u,p,m,d}),t,null,[[1,12]])}))),e.state={displayDirections:!1,isLoading:!0},e}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e){(e.modeType===this.props.modeType&&JSON.stringify(e.selectedCoffeeShop)===JSON.stringify(this.props.selectedCoffeeShop)||this.setState({isLoading:!0},this.getSelectedTransportation),!1===function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}(e.coffeeShops,this.props.coffeeShops)&&this.setState({displayDirections:!1,isLoading:!0}),this.props.coffeeShops&&this.props.coffeeShops.length>0)&&document.querySelector("#mapAndResults").scrollIntoView()}},{key:"render",value:function(){var e=this,t=this.props,a=t.coffeeShops,n=t.radiusMap,o=t.directionsMap;return r.a.createElement(r.a.Fragment,null,a.length>0?r.a.createElement("div",{className:"mapAndCoffeeShopBackground",id:"mapAndResults"},r.a.createElement("div",{className:"mapAndCoffeeShopContainer wrapper"},r.a.createElement("div",{className:"map"},this.state.isLoading&&r.a.createElement("div",{className:"spinnerContainer"},r.a.createElement("div",{className:"loadingSpinner"})),r.a.createElement("img",{src:this.state.displayDirections?o:n,onLoad:function(){return e.setState({isLoading:!1})},alt:"map of selected library and coffee shops"})),this.state.displayDirections?r.a.createElement(R,{handleBackButton:this.handleBackButton}):r.a.createElement(I,{handleCoffeeShopSelected:this.handleCoffeeShopSelected}))):null)}}]),a}(n.Component),_=Object(b.b)((function(e){return{coffeeShops:e.coffeeShops.list,radiusMap:e.coffeeShops.map,directionsMap:e.directions.map,selectedLibrary:e.library,selectedCoffeeShop:e.directions.location,modeType:e.directions.mode}}))(B),x=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("a",{href:"#form",className:"skipLink"},"Skip to main"),r.a.createElement(p,null),r.a.createElement("main",{className:"mainContainer"},r.a.createElement("div",{className:"wrapper"},r.a.createElement(m,null),r.a.createElement(C,null)),r.a.createElement(_,null)),r.a.createElement(w,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(5),L=a(31),A={name:"",latitude:"",longitude:"",radius:""},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LIBRARY":return t.payload;default:return e}},F={list:[],map:""},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_COFFEE_SHOPS":return t.payload;default:return e}},P={session:"",location:{},map:"",instructions:[],mode:"fastest"},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DIRECTIONS_INSTRUCTIONS":return Object(f.a)(Object(f.a)({},e),t.payload);case"SET_DIRECTIONS_LOCATION":return Object(f.a)(Object(f.a)({},e),{},{location:t.payload});case"SET_DIRECTIONS_MODE":return Object(f.a)(Object(f.a)({},e),{},{mode:t.payload});default:return e}},J=Object(D.c)({library:q,coffeeShops:M,directions:V}),K=[L.a],Y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||D.d,U=Object(D.e)(J,{},Y(D.a.apply(void 0,K)));i.a.render(r.a.createElement(b.a,{store:U},r.a.createElement(r.a.StrictMode,null,r.a.createElement(x,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.5949fcd4.chunk.js.map